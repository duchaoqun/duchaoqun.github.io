<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <base href="">

    <!--
    favicons generated with:
    <http://realfavicongenerator.net>

    if you want to generate your own favicon, use this custom path:
    /theme/ico/favicon/
    -->
    <link rel="apple-touch-icon" sizes="57x57" href="/theme/ico/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/theme/ico/favicon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/theme/ico/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/theme/ico/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/theme/ico/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/theme/ico/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/theme/ico/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/theme/ico/favicon/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/theme/ico/favicon/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/theme/ico/favicon/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/theme/ico/favicon/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/theme/ico/favicon/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/theme/ico/favicon/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/theme/ico/favicon/manifest.json">
    <link rel="mask-icon" href="/theme/ico/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/theme/ico/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/theme/ico/favicon/mstile-144x144.png">
    <meta name="msapplication-config" content="/theme/ico/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    
    <script src="/theme/js/lib/jquery-1.11.3.js"></script>
    <link rel="stylesheet" type="text/css" href="/theme/css/uikit.min.css" />
    <!-- custom css -->
    <link rel="stylesheet" type="text/css" href="/theme/css/custom.min.css" />
    <!-- default pygment style is the 'default' style -->
    <link rel="stylesheet" type="text/css" href="/theme/css/pygment.min.css" />
    <script src="/theme/js/uikit.min.js"></script>
    <title>Top - linux 查看系统资源命令 | Chris's Blog</title>
  <meta name="tags" content="linux, command" /> <meta name="description" content="top 命令是 Linux 下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，类似于Windows的任务管理器。" /> <meta name="category" content="Article" /> 
  </head>
  <body>
<div class="uk-container uk-container-center uk-margin-top uk-margin-large-bottom">
    <nav class="uk-navbar uk-margin-large-bottom">
        <a class="uk-navbar-brand uk-hidden-small" href="">Chris's Blog</a>
        <ul class="uk-navbar-nav uk-hidden-small">
      <li class="uk-active"><a href="/category/article.html">Article</a></li>
        </ul>
        <a href="#offcanvas" class="uk-navbar-toggle uk-visible-small" data-uk-offcanvas=""></a>
        <div class="uk-navbar-brand uk-navbar-center uk-visible-small">Chris's Blog</div>
    </nav>
    <div class="uk-grid" data-uk-grid-margin="">
        <main class="uk-width-medium-3-4">
<article>
<div class="uk-article">
    <header>
    <h1 class=" uk-article-title">
        <a href="/00002.html">top - linux 查看系统资源命令</a>
    </h1>
    <p class="uk-article-meta">
    Published on   <time datetime="2020-03-28">周六 28 三月 2020</time>
        by         <a class="url fn" href="/author/chris.html">Chris</a>
    posted in <a href="/category/article.html">Article</a>
    <br/>
    <a href="/tag/linux.html" class="uk-icon-tag">linux</a>
    <a href="/tag/command.html" class="uk-icon-tag">command</a>

    </p>
    </header>
    <h2>top命令</h2>
<p>查看系统资源利用情况</p>
<div class="highlight"><pre><span></span><code>top - <span class="m">10</span>:41:35 up <span class="m">1</span> min,  <span class="m">2</span> users,  load average: <span class="m">0</span>.52, <span class="m">0</span>.58, <span class="m">0</span>.59
Tasks:   <span class="m">387</span> total,   <span class="m">1</span> running,   <span class="m">386</span> sleeping,   <span class="m">0</span> stopped,   <span class="m">0</span> zombie
%Cpu<span class="o">(</span>s<span class="o">)</span>:  <span class="m">4</span>.7 us,  <span class="m">1</span>.2 sy,  <span class="m">0</span>.0 ni, <span class="m">93</span>.9 id,  <span class="m">0</span>.0 wa,  <span class="m">0</span>.1 hi,  <span class="m">0</span>.0 si,  <span class="m">0</span>.0 st
MiB Mem :  <span class="m">16322</span>.8 total,   <span class="m">9257</span>.5 free,   <span class="m">6841</span>.3 used,    <span class="m">224</span>.0 buff/cache
MiB Swap:  <span class="m">49152</span>.0 total,  <span class="m">49050</span>.1 free,    <span class="m">101</span>.9 used.   <span class="m">9350</span>.9 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
    <span class="m">4</span> aoye      <span class="m">20</span>   <span class="m">0</span>   <span class="m">14972</span>   <span class="m">2200</span>   <span class="m">2108</span> S   <span class="m">0</span>.0   <span class="m">0</span>.0   <span class="m">0</span>:00.12 bash
    <span class="m">7</span> aoye      <span class="m">20</span>   <span class="m">0</span>   <span class="m">16924</span>   <span class="m">1964</span>   <span class="m">1396</span> R   <span class="m">0</span>.0   <span class="m">0</span>.0   <span class="m">0</span>:00.03 top
    <span class="m">1</span> root      <span class="m">20</span>   <span class="m">0</span>    <span class="m">8304</span>    <span class="m">132</span>    <span class="m">104</span> S   <span class="m">0</span>.0   <span class="m">0</span>.0   <span class="m">0</span>:00.20 init
    <span class="m">3</span> root      <span class="m">20</span>   <span class="m">0</span>    <span class="m">8304</span>     <span class="m">92</span>     <span class="m">56</span> S   <span class="m">0</span>.0   <span class="m">0</span>.0   <span class="m">0</span>:00.00 init
</code></pre></div>


<h2>说明</h2>
<p>第一行【top】：系统</p>
<ul>
<li>“10:41:35”为系统当前时刻。</li>
<li>“up 13days,20:23”为系统启动后到现在的运作时间。</li>
<li>“2 users”为当前登录到系统的用户，更确切的说是登录到用户的终端数，同一个用户同一时间对系统多个终端的连接将被视为多个用户连接到系统，这里的用户数也将表现为终端的数目。</li>
<li>“load average”为当前系统负载的平均值，后面的三个值分别为1分钟前、5分钟前、15分钟前进程的平均数。</li>
</ul>
<p>第二行【Tasks】：进程</p>
<ul>
<li>“387 total”为当前系统进程总数。</li>
<li>“1 running”为当前运行中的进程数。</li>
<li>“386 sleeping”为当前处于等待状态中的进程数。</li>
<li>“0 stoped”为被停止的系统进程数。</li>
<li>“0 zombie”为被复原的进程数，僵尸进程。</li>
</ul>
<p>第三行【Cpus】：分别表示了 CPU 当前的使用率。</p>
<ul>
<li>5.9%  us - 用户空间占用CPU的百分比。</li>
<li>3.4%  sy - 内核空间占用CPU的百分比。</li>
<li>0.0% ni - 改变过优先级的进程占用CPU的百分比</li>
<li>90.4% id - 空闲CPU百分比</li>
<li>0.0% wa - IO等待占用CPU的百分比</li>
<li>0.0% hi - 硬中断（Hardware IRQ）占用CPU的百分比</li>
<li>0.2% si - 软中断（Software Interrupts）占用CPU的百分比</li>
<li>0.0% st - ？？</li>
</ul>
<p>注意：在这里CPU的使用比率和windows概念不同，需要理解linux系统用户空间和内核空间的相关知识。</p>
<p>第四行【Mem】：分别表示了内存总量、当前使用量、空闲内存量、以及缓冲使用中的内存量。</p>
<ul>
<li>32949016k total - 物理内存总量（32GB）</li>
<li>14411180k used - 使用中的内存总量（14GB）</li>
<li>18537836k free - 空闲内存总量（18GB）</li>
<li>169884k buffers - 缓存的内存量 （169M）</li>
</ul>
<p>第五行【Swap】：表示类别同第四行（Mem），但此处反映着交换分区（Swap）的使用情况。
通常，交换分区（Swap）被频繁使用的情况，将被视作物理内存不足而造成的。</p>
<ul>
<li>32764556k total - 交换区总量（32GB）</li>
<li>0k used - 使用的交换区总量（0K）</li>
<li>32764556k free - 空闲交换区总量（32GB）</li>
<li>3612636k cached - 缓冲的交换区总量（3.6GB）</li>
</ul>
<p>注意：第四行中使用中的内存总量（used）指的是现在系统内核控制的内存数，空闲内存总量（free）是内核还未纳入其管控范围的数量。纳入内核管理的内存不见得都在使用中，还包括过去使用过的现在可以被重复利用的内存，内核并不把这些可被重新使用的内存交还到free中去，因此在linux上free内存会越来越少，但不用为此担心。如果出于习惯去计算可用内存数，这里有个近似的计算公式：第四行的free + 第四行的 buffers + 第五行 的 cached ， 按这个公式此台服务器的可用内存：18537836k+169884k+3612636k = 22GB左右。 对于内存监控，在top里我们要时刻监控第五行swap交换分区的used，如果这个数值在不断的变化，说明内核在不断进行内存和swap的数据交换，这是真正的内存不够用了。</p>
<p>第六行【中间空白】：中间部分的内部命令提示栏top 运行中可以通过 top 的内部命令对进程的显示方式进行控制。内部命令如下表：</p>
<ol>
<li>s - 改变画面更新频率</li>
<li>l - 关闭或开启第一行 top 信息的表示</li>
<li>t - 关闭或开启第二行 Tasks 和第三行 Cpus 信息的表示</li>
<li>m - 关闭或开启第四行 Mem 和 第五行 Swap 信息的表示</li>
<li>N - 以 PID 的大小的顺序排列表示进程列表</li>
<li>P - 以 CPU 占用率大小的顺序排列进程列表</li>
<li>M - 以内存占用率大小的顺序排列进程列表</li>
<li>h - 显示帮助</li>
<li>n - 设置在进程列表所显示进程的数量</li>
<li>q - 退出 top</li>
</ol>
<p>最下部分的进程列表栏</p>
<ul>
<li>PID - 进程id</li>
<li>USER - 进程所有者</li>
<li>PR - 进程优先级</li>
<li>NI - nice值。负值表示高优先级，正值表示低优先级</li>
<li>VIRT - 进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES</li>
<li>RES - 进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA</li>
<li>SHR - 共享内存大小，单位kb</li>
<li>S - 进程状态。D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程</li>
<li>%CPU - 上次更新到现在的CPU时间占用百分比</li>
<li>%MEM - 进程使用的物理内存百分比</li>
<li>TIME+ - 进程使用的CPU时间总计，单位1/100秒</li>
<li>COMMAND - 进程名称（命令名/命令行）</li>
</ul>
<h2>其他技巧</h2>
<ul>
<li>
<p>在top基本视图中，按键盘数字“1”，可监控每个逻辑CPU的状况。</p>
</li>
<li>
<p>敲击键盘“b”（打开/关闭加亮效果）高亮显示当前运行进程。</p>
</li>
<li>
<p>进程字段排序，默认是按照CPU使用量来排序的，按“x”可以高亮当前排序的列，shift + &gt; 或者 &lt; 可以切换排序的列。</p>
</li>
<li>
<p>top -c 显示完整的命令</p>
</li>
<li>
<p>top -b 以批处理的方式显示程序信息</p>
</li>
<li>
<p>top -S 以累计的模式显示程序信息</p>
</li>
<li>
<p>top -n 2 设置信息更新次数</p>
</li>
<li>
<p>top -d 3 设置信息更新时间</p>
</li>
<li>
<p>top -p 123 显示指定进程的信息</p>
</li>
</ul>
<h2>交互命令</h2>
<p>在top 命令执行过程中可以使用的一些交互命令。这些命令都是单字母的，如果在命
令行中使用了s 选项， 其中一些命令可能会被屏蔽。
- h 显示帮助画面，给出一些简短的命令总结说明
- k 终止一个进程。
- i 忽略闲置和僵死进程。这是一个开关式命令。
- q 退出程序
- r 重新安排一个进程的优先级别
- S 切换到累计模式
- s 改变两次刷新之间的延迟时间（单位为s），如果有小数，就换算成m s。输入0值则系统将不断刷新，默认值是5 s
- f 或者F 从当前显示中添加或者删除项目
- o 或者O 改变显示项目的顺序
- l 切换显示平均负载和启动时间信息
- m 切换显示内存信息
- t 切换显示进程和CPU状态信息
- c 切换显示命令名称和完整命令行
- M 根据驻留内存大小进行排序
- P 根据CPU使用百分比大小进行排序
- T 根据时间/累计时间进行排序
- W 将当前设置写入~/.toprc文件中</p>
<h2>About</h2>
<ul>
<li>企鹅号码：848408012</li>
<li>企鹅群号：465073050</li>
<li>私人邮箱：du.chao.qun@163.com</li>
<li>备注说明：欢迎联系交流，共同学习进步，转载请注明出处，谢谢。</li>
</ul>
</div>
</article>
        </main>
        <aside class="uk-width-medium-1-4">

  <div class="uk-panel uk-panel-box uk-text-center">
    <a href="/author/Chris.html">
      <img alt="A picture of the author of this content." class="uk-border-circle" src="/theme/img/author.jpg"/><h3>Chris</h3></a>
      <p>
      Hi there! My name is Chris Du, check out more <a href="">about me</a>.
      </p>
  </div>

  <div class="uk-panel">
      <h3 class="uk-panel-title">Social Links</h3>
      <div class="icons">
          <a href="https://github.com/duchaoqun" class="uk-icon-button uk-icon-justify uk-icon-github"></a>
          <a href="https://twitter.com/AoyedeMutou" class="uk-icon-button uk-icon-justify uk-icon-twitter"></a>
      </div>
  </div>

    <div class="uk-panel">
    <h3 class="uk-panel-title">Tags</h3>
    <ul class="uk-list uk-list-line">
          <li><a href="/tag/aliyun.html" class="uk-icon-tag">aliyun</a></li>
          <li><a href="/tag/java.html" class="uk-icon-tag">java</a></li>
          <li><a href="/tag/ram.html" class="uk-icon-tag">RAM</a></li>
          <li><a href="/tag/sts.html" class="uk-icon-tag">STS</a></li>
          <li><a href="/tag/linux.html" class="uk-icon-tag">linux</a></li>
          <li><a href="/tag/command.html" class="uk-icon-tag">command</a></li>
          <li><a href="/tag/git.html" class="uk-icon-tag">git</a></li>
          <li><a href="/tag/python.html" class="uk-icon-tag">python</a></li>
          <li><a href="/tag/pelican.html" class="uk-icon-tag">pelican</a></li>
    </ul>
    </div>


    <div class="uk-panel">
    <h3 class="uk-panel-title">Links</h3>
    <ul class="uk-list uk-list-line">
          <li><a href="http://baidu.com/" class="uk-icon-external-link">Baidu</a></li>
          <li><a href="http://python.org/" class="uk-icon-external-link">Python.org</a></li>
          <li><a href="http://jinja.pocoo.org/" class="uk-icon-external-link">Jinja2</a></li>
    </ul>
    </div>

        </aside>
    </div>
    <footer class="uk-margin-bottom uk-panel uk-panel-box uk-text-center uk-margin-large-top">
        © Copyright 2011 – Present, Chris Du.
    </footer>
</div>

<div id="offcanvas" class="uk-offcanvas">
    <div class="uk-offcanvas-bar">
        <ul class="uk-nav uk-nav-offcanvas">
      <li class="uk-active"><a href="/category/article.html">Article</a></li>
        </ul>
    </div>
</div>
  </body>
</html>